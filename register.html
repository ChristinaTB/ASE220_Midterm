<!DOCTYPE html>
<html>
    <head>
        <title>Registration</title>
                <!-- bootstrap css -->
                <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    </head>
    <body>

        <nav class="navbar navbar-dark bg-dark" style = "min-width: 500px;">
            <a href="/" style = "text-decoration: none;"><h1 style = "color:whitesmoke; margin-left: 20px">Vroom</h1></a>
             <div style = "margin-right:30px">
                <a href="/signin"  class="btn btn-outline-light" role="button" aria-pressed="true">Sign In</a>
             <a href= "/register.html"><button type="button" class="btn btn-outline-light">Sign up</button></a>
             </div>
           </nav>
 
        <div class = "container">
            <div class = "row">
                <div class = "card">
                    <div class = "row">
                        <h1 class = "text-center display-1">Registration</h1>
    
                    </div>
                    <form id = "registerForm" style = "margin-left: auto; margin-right: auto;margin-top: 20px;">
                    <div >
                    <div class = "row" style = "width: 500px;">
                        <div class="input-group mb-3">
                            <span class="input-group-text" id="inputGroup-sizing-default">FirstName</span>
                            <input type="text" name = "firstname" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
                          </div>
                    </div>
                    <div class = "row" style = "width: 500px;">
                        <div class="input-group mb-3">
                            <span class="input-group-text" id="inputGroup-sizing-default">LastName</span>
                            <input type="text" name= "lastname" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
                          </div>
                    </div>
                    <div class = "row" style = "width: 500px;">
                        <div class="input-group mb-3">
                            <span class="input-group-text" id="inputGroup-sizing-default">Email</span>
                            <input type="text" name = "email" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
                          </div>
                    </div>
                    <div class = "row" style = "width: 500px;">
                        <div class="input-group mb-3">
                            <span class="input-group-text" id="inputGroup-sizing-default">Password</span>
                            <input type="password" name="password" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
                          </div>
                    </div>
                    <div class = "row">
                        <button type = "submit">Submit</button>
                    </div>
                </div>
            </form>
                </div>
            </div>
        </div>




        <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
        <script src="asset/jquery-3.5.1.min.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js" integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js" integrity="sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj" crossorigin="anonymous"></script>
    
    
    <script>
         $(document).on('submit', "#registerForm", function(e){
                //disable the browser default submit
                e.preventDefault();
                //download json database
       
        
                // {
                var f={
                    firstname : $('input[name = "firstname"]').val(),
                    lastname : $('input[name = "lastname"]').val(),
                    email : $('input[name = "email"]').val(),
                    password : $('input[name = "password"]').val(),

                };
              
                  $.ajax({
                      type: "POST",
                      url: '/API/users',
                      contentType: "application/json",
                      data: JSON.stringify(f),
                      success: function(output, status, xhr)
                      {
                          console.log(xhr);
                          console.log(xhr.getResponseHeader("Location"));
                          alert("Welcome to Vroom,"+ f.firstname);
                          window.location.href = "/";
                      }
                      
                  });

                // let formData = Object.formEntries(new FormData (f[0]));
                // console.log(formData);
                console.log(f);

                return;

          
              
                // $.getJSON('https://jsonblob.com/api/jsonBlob/2c155f5d-7afb-11eb-8dd6-6f7957243c71 ', function(data)
                // {
                   
                // //   console.log(data);
                    
                //   var locationsitem = {
                //       firstname : $('input[name = "firstname"]').val(),
                //       title :  $('input[name = "title"]').val(),
                //     username :  $('input[name = "username"]').val(),
                //     date : $('input[name = "date"]').val(),
                //     picture :  $('input[name = "picture"]').val(),
                //     content :  $('textarea[name = "content"]').val(),
                //     tags :  $('input[name = "tags"]').val(),
                //   };
                //   console.log(locationsitem);

                //   data.push(locationsitem);
                //   console.log(data);

                //   $.ajax({
                //       type: "PUT",
                //       url: 'https://jsonblob.com/api/jsonBlob/2c155f5d-7afb-11eb-8dd6-6f7957243c71 ',
                //       contentType: "application/json",
                //       data: JSON.stringify(data),
                //       success: function(output, status, xhr)
                //       {
                //           console.log(xhr);
                //           console.log(xhr.getResponseHeader("Location"));
                //           window.location.href = "index.html";
                //       }
                //   });



                //  })

  
            });
    </script>
    
    </body>
</html>